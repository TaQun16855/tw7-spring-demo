<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>tw7</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>

    <!-- ヘッダー -->
    <!-- thymeleafのfragments機能で共通化して使いまわしてる。"fragments/header.html"に本体あり -->
    <div th:replace="~{fragments/header :: navbar}"></div>

    <div class="container mt-5">
        <h1>Modelに入れたデータの表示</h1>

        <!-- ${xxx} : {}の中にはJSPとかと同じようにjavaのコード書ける -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|文字列の表示 : String|">title</h5>
                <p class="card-text" th:text="${message}">context</p>
                <p class="card-text" th:text="${'「message == hello!」 -> ' + message.equals('hello!')}">context</p>
            </div>
        </div>

        <!-- ${オブジェクト} : オブジェクトの.toString()メソッドが呼び出されて表示されてる -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|リストの表示 : List|">title</h5>
                <p class="card-text" th:text="${list}">context</p>
                <p class="card-text" th:text="|list.toString() = ${list.toString()}|">context</p>
                <p class="card-text" th:text="|list.get(0) = ${list.get(0)}|">context</p>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|マップの表示 : Map|">title</h5>
                <p class="card-text" th:text="${map}">context</p>
                <p class="card-text" th:text="|map.get('two') = ${map.get('two')}|">context</p>
            </div>
        </div>

        <!-- Thymeleafの機能 -->
        <br>
        <h2>Thymeleafの機能</h2>
        <!-- if unless -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|if文|">title</h5>
                <span>「message」っていう値があれば表示:</span>
                <span class="card-text" th:if="${message}" th:text="|${message}|" style="color: cyan;">context</span>
            </div>
        </div>
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|unless文|">title</h5>
                <span>「fake_massage」っていう値がなければ表示:</span>
                <span class="card-text" th:unless="${fake_massage}" th:text="|値ないよ|" style="color: red;">context</span>
            </div>
        </div>

        <!-- each -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|each式|">title</h5>
                <span>リストの中身を表示</span>
                <div th:each="cur : ${list}">
                    <li class="card-text" th:text="${cur}">context</li>
                </div>
                <span>マップの中身を表示</span>
                <div th:each="key : ${map.keySet()}">
                    <li class="card-text" th:text="${map.get(key)}">context</li>
                </div>
            </div>
        </div>


        <!-- 自作オブジェクトの表示方法 -->
        <br>
        <h2>自作のオブジェクト</h2>
        <!-- 書籍情報 -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|本 : Book|">title</h5>
                <p class="card-text" th:text="${book}">context</p>
            </div>
        </div>
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|本のリスト : Books|">title</h5>
                <div th:each="cur : ${books}">
                    <p class="card-text" th:text="${cur}">context</p>
                </div>
            </div>
        </div>

        <!-- ジャンル情報 -->
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|ジャンル : Genre|">title</h5>
                <p class="card-text" th:text="'ジャンルコード:' + ${genre.code}">context</p>
                <p class="card-text" th:text="'ジャンル名:' + ${genre.name}">context</p>
                <p class="card-text" th:text="'ジャンルの本一覧:'">context</p>
                <div th:if="${genre.books}" th:each="cur : ${genre.books}">
                    <li class="card-text" th:text="${cur}">context</li>
                </div>
            </div>
        </div>
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title" th:text="|ジャンルのリスト(+該当の本) : Genres|">title</h5>
                <div th:each="genre : ${genres}">
                    <p class="card-text" th:text="${genre.name}">context</p>
                    <div th:if="${genre.books}" th:each="cur : ${genre.books}">
                        <li class="card-text" th:text="${cur}">context</li>
                    </div>
                    <div th:if="${genre.books == null or genre.books.size() == 0}">
                        <p class="card-text" th:text="None">none</p>
                    </div>
                    <br>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
